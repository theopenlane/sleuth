#!/bin/bash
set -euo pipefail

export GOPROXY=https://proxy.golang.org,direct
export GOMODCACHE="${HOME}/.cache/go/pkg/mod"
export GOCACHE="${HOME}/.cache/go-build"
export GOLANGCI_LINT_CACHE="${HOME}/.cache/golangci-lint"

export BUILD_TIMESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
export BUILD_VERSION=${BUILDKITE_BUILD_NUMBER:-dev}
export BUILD_COMMIT=${BUILDKITE_COMMIT:-$(git rev-parse HEAD 2>/dev/null || echo "unknown")}
export BUILD_BRANCH=${BUILDKITE_BRANCH:-$(git branch --show-current 2>/dev/null || echo "unknown")}

export DOCKER_BUILDKIT=1
